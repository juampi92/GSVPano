/*!
 * GSVPano v1.2.0
 * (c) https://juampi92.github.io/GSVPano
 * License: MIT
*/
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("es5-ext/object/valid-object"),e=Object.prototype.hasOwnProperty;b.exports=function(a){var b,c=arguments[1];if(d(a),void 0!==c){if(b=e.call(a,"__ee__")&&a.__ee__,!b)return;return void(b[c]&&delete b[c])}e.call(a,"__ee__")&&delete a.__ee__}},{"es5-ext/object/valid-object":14}],2:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=a("d"),l=a("es5-ext/object/valid-callable"),m=Function.prototype.apply,n=Function.prototype.call,o=Object.create,p=Object.defineProperty,q=Object.defineProperties,r=Object.prototype.hasOwnProperty,s={configurable:!0,enumerable:!1,writable:!0};d=function(a,b){var c;return l(b),r.call(this,"__ee__")?c=this.__ee__:(c=s.value=o(null),p(this,"__ee__",s),s.value=null),c[a]?"object"==typeof c[a]?c[a].push(b):c[a]=[c[a],b]:c[a]=b,this},e=function(a,b){var c,e;return l(b),e=this,d.call(this,a,c=function(){f.call(e,a,c),m.call(b,this,arguments)}),c.__eeOnceListener__=b,this},f=function(a,b){var c,d,e,f;if(l(b),!r.call(this,"__ee__"))return this;if(c=this.__ee__,!c[a])return this;if(d=c[a],"object"==typeof d)for(f=0;e=d[f];++f)(e===b||e.__eeOnceListener__===b)&&(2===d.length?c[a]=d[f?0:1]:d.splice(f,1));else(d===b||d.__eeOnceListener__===b)&&delete c[a];return this},g=function(a){var b,c,d,e,f;if(r.call(this,"__ee__")&&(e=this.__ee__[a]))if("object"==typeof e){for(c=arguments.length,f=new Array(c-1),b=1;c>b;++b)f[b-1]=arguments[b];for(e=e.slice(),b=0;d=e[b];++b)m.call(d,this,f)}else switch(arguments.length){case 1:n.call(e,this);break;case 2:n.call(e,this,arguments[1]);break;case 3:n.call(e,this,arguments[1],arguments[2]);break;default:for(c=arguments.length,f=new Array(c-1),b=1;c>b;++b)f[b-1]=arguments[b];m.call(e,this,f)}},h={on:d,once:e,off:f,emit:g},i={on:k(d),once:k(e),off:k(f),emit:k(g)},j=q({},i),b.exports=c=function(a){return null==a?o(j):q(Object(a),i)},c.methods=h},{d:3,"es5-ext/object/valid-callable":13}],3:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/assign"),f=a("es5-ext/object/normalize-options"),g=a("es5-ext/object/is-callable"),h=a("es5-ext/string/#/contains");d=b.exports=function(a,b){var c,d,g,i,j;return arguments.length<2||"string"!=typeof a?(i=b,b=a,a=null):i=arguments[2],null==a?(c=g=!0,d=!1):(c=h.call(a,"c"),d=h.call(a,"e"),g=h.call(a,"w")),j={value:b,configurable:c,enumerable:d,writable:g},i?e(f(i),j):j},d.gs=function(a,b,c){var d,i,j,k;return"string"!=typeof a?(j=c,c=b,b=a,a=null):j=arguments[3],null==b?b=void 0:g(b)?null==c?c=void 0:g(c)||(j=c,c=void 0):(j=b,b=c=void 0),null==a?(d=!0,i=!1):(d=h.call(a,"c"),i=h.call(a,"e")),k={get:b,set:c,configurable:d,enumerable:i},j?e(f(j),k):k}},{"es5-ext/object/assign":4,"es5-ext/object/is-callable":7,"es5-ext/object/normalize-options":12,"es5-ext/string/#/contains":16}],4:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.assign:a("./shim")},{"./is-implemented":5,"./shim":6}],5:[function(a,b,c){"use strict";b.exports=function(){var a,b=Object.assign;return"function"!=typeof b?!1:(a={foo:"raz"},b(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},{}],6:[function(a,b,c){"use strict";var d=a("../keys"),e=a("../valid-value"),f=Math.max;b.exports=function(a,b){var c,g,h,i=f(arguments.length,2);for(a=Object(e(a)),h=function(d){try{a[d]=b[d]}catch(e){c||(c=e)}},g=1;i>g;++g)b=arguments[g],d(b).forEach(h);if(void 0!==c)throw c;return a}},{"../keys":9,"../valid-value":15}],7:[function(a,b,c){"use strict";b.exports=function(a){return"function"==typeof a}},{}],8:[function(a,b,c){"use strict";var d={"function":!0,object:!0};b.exports=function(a){return null!=a&&d[typeof a]||!1}},{}],9:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":10,"./shim":11}],10:[function(a,b,c){"use strict";b.exports=function(){try{return Object.keys("primitive"),!0}catch(a){return!1}}},{}],11:[function(a,b,c){"use strict";var d=Object.keys;b.exports=function(a){return d(null==a?a:Object(a))}},{}],12:[function(a,b,c){"use strict";var d=Array.prototype.forEach,e=Object.create,f=function(a,b){var c;for(c in a)b[c]=a[c]};b.exports=function(a){var b=e(null);return d.call(arguments,function(a){null!=a&&f(Object(a),b)}),b}},{}],13:[function(a,b,c){"use strict";b.exports=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");return a}},{}],14:[function(a,b,c){"use strict";var d=a("./is-object");b.exports=function(a){if(!d(a))throw new TypeError(a+" is not an Object");return a}},{"./is-object":8}],15:[function(a,b,c){"use strict";b.exports=function(a){if(null==a)throw new TypeError("Cannot use null or undefined");return a}},{}],16:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":17,"./shim":18}],17:[function(a,b,c){"use strict";var d="razdwatrzy";b.exports=function(){return"function"!=typeof d.contains?!1:d.contains("dwa")===!0&&d.contains("foo")===!1}},{}],18:[function(a,b,c){"use strict";var d=String.prototype.indexOf;b.exports=function(a){return d.call(this,a,arguments[1])>-1}},{}],19:[function(a,b,c){(function(c){var d=a("event-emitter"),e=e||{};e._url="http://maps.google.com/cbk?output=tile",e._data_url="https://cbks0.google.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=polygon&it=1%3A1&rank=closest&radius=350",e.Pano=a("./Pano"),e.PanoLoader=function(a){"use strict";d(this);var b=a||{};this._panoClient=new google.maps.StreetViewService,this.setZoom(b.zoom||1),this.autocompose=void 0===b.autocompose?!0:b.autocompose,this.radius=b.radius||50},e.PanoLoader.prototype._setProgress=function(a,b){this.emit("panorama.progress",b,a)},e.PanoLoader.prototype._throwError=function(a){this.emit("error",a)},e.PanoLoader.prototype.load=function(a,b){var c=this;this._panoClient.getPanoramaByLocation(a,this.radius,function(d,f){if(f===google.maps.StreetViewStatus.OK){var g=new e.Pano({id:d.location.pano,rotation:d.tiles.centerHeading,pitch:d.tiles.originPitch,copyright:d.copyright,imageDate:d.imageDate,location:d.location,zoom:c.zoom}).on("complete",c.emit.bind(c,"panorama.load")).on("progress",c._setProgress.bind(c,g));c.autocompose&&g.compose(),c.emit("panorama.data",g),b&&b(g)}else c.emit("panorama.nodata",a,f),c._throwError("Could not retrieve panorama for the following reason: "+f)})},e.PanoLoader.prototype.setZoom=function(a){this.zoom=a},c.GSVPANO=b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Pano":20,"event-emitter":2}],20:[function(a,b,c){var d=a("event-emitter");d.alloff=a("event-emitter/all-off");var e=function(a){d(this);this.id=a.id,this.setRotation(a.rotation||0),this.pitch=a.pitch,this.location=a.location,this.imageDate=a.imageDate,this.copyright=a.copyright,this.zoom=parseInt(a.zoom),this.canvas=null,this._ctx=null,this._loaded=!1};e.prototype.setRotation=function(a){return this.rotation=a*Math.PI/180,this},e.prototype.initCanvas=function(){this.canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d");var a=416*Math.pow(2,this.zoom),b=416*Math.pow(2,this.zoom-1);this.canvas.width=a,this.canvas.height=b},e.prototype.compose=function(){this.initCanvas();var a,b,c,d=Math.pow(2,this.zoom-1);switch(this.zoom){case 5:a=26,d=13;break;case 4:a=13,d=7;break;case 3:a=7;break;default:a=Math.pow(2,this.zoom)}for(this._count=0,this._total=a*d,c=0;d>c;c++)for(b=0;a>b;b++)this.createImage(b,c);return this},e.prototype.createImage=function(a,b){var c=GSVPANO._url+"&panoid="+this.id+"&zoom="+this.zoom+"&x="+a+"&y="+b+"&"+Date.now(),d=new Image;d.addEventListener("load",this.composeFromTile.bind(this,a,b,d)),d.crossOrigin="",d.src=c},e.prototype.composeFromTile=function(a,b,c){if(!this.cancelled){this._ctx.drawImage(c,512*a,512*b),this._count++;var e=Math.round(100*this._count/this._total);this.emit("progress",e),this._count===this._total&&(this._loaded=!0,this.emit("complete",this),d.alloff(this))}},e.prototype.cancel=function(){d.alloff(this),this.cancelled=!0},b.exports=e},{"event-emitter":2,"event-emitter/all-off":1}]},{},[19]);