/*!
 * GSVPano v1.0.0
 * (c) konforti, juampi92 - https://juampi92.github.io/GSVPano
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
*/
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){var c={};c.PanoLoader=function(a){"use strict";var b,c,d=this,e=a||{},f=new google.maps.StreetViewService,g=0,h=0,i=document.createElement("canvas"),j=i.getContext("2d"),k=0,l=0,m="",n=function(a){d.onProgress&&d.onProgress(a)};this.throwError=function(a){this.onError?this.onError(a):console.error(a)},this.adaptTextureToZoom=function(){var a=416*Math.pow(2,b),c=416*Math.pow(2,b-1);i.width=a,i.height=c},this.composeFromTile=function(a,b,c){j.drawImage(c,512*a,512*b),g++;var d=Math.round(100*g/h);n(d),g===h&&(this.canvas=i,this.onPanoramaLoad&&this.onPanoramaLoad())},this.composePanorama=function(a){n(0);var d,e,f,i=3==b?7:Math.pow(2,b),j=Math.pow(2,b-1),k=this;for(g=0,h=i*j,f=0;j>f;f++)for(e=0;i>e;e++){d="http://maps.google.com/cbk?output=tile&panoid="+c+"&zoom="+b+"&x="+e+"&y="+f+"&"+Date.now();var l=new Image;l.addEventListener("load",k.composeFromTile.bind(k,e,f,l)),l.crossOrigin="",l.src=d}},this.loadData=function(a){var b,c=this;b="https://maps.google.com/cbk?output=json&hl=x-local&ll="+a.lat()+","+a.lng()+"&cb_client=maps_sv&v=3",b="https://cbks0.google.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=polygon&it=1%3A1&rank=closest&ll="+a.lat()+","+a.lng()+"&radius=350";var d=new XMLHttpRequest;d.open("GET",b,!0),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var b=JSON.parse(d.responseText);c.loadPano(a,b.result[0].id)}},d.send(null)},this.load=function(a,b){var d=this;f.getPanoramaByLocation(a,50,function(b,e){e===google.maps.StreetViewStatus.OK?(d.onPanoramaData&&d.onPanoramaData(b),k=b.tiles.centerHeading*Math.PI/180,l=b.tiles.originPitch,m=b.copyright,d.copyright=b.copyright,c=b.location.pano,d.location=a,d.rotation=k,d.pitch=l,d.image_date=b.imageDate,d.id=c,d.composePanorama()):(d.onNoPanoramaData&&d.onNoPanoramaData(e),d.throwError("Could not retrieve panorama for the following reason: "+e))})},this.setZoom=function(a){b=a,this.adaptTextureToZoom()},this.setZoom(e.zoom||1)},a.GSVPANO=b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);